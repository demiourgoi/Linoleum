name: linoleum_ltlss

on:
  push:
    branches: [ "*" ]
  pull_request:
    branches: [ "*" ]

jobs:
  build:

    runs-on: ubuntu-latest
    defaults:
      run:
        working-directory: ./
    permissions:
      contents: read

    # This build is a simplification of .github/workflows/ci.yml
    # as generated by `sbt githubWorkflowGenerate`from https://github.com/sbt/sbt-github-actions
    steps:
      - name: Set up JDK 20
        uses: actions/setup-java@v4
        with:
          java-version: '20'
          distribution: 'temurin'

      - name: Setup sbt
        uses: sbt/setup-sbt@v1

      - name: Checkout sscheck-core
        uses: actions/checkout@v4
        with:
          repository: 'demiourgoi/sscheck-core'
          ref: '0.5.1-scala'

      - name: Build sscheck-core
        run: sbt clean publishLocal

      - name: Checkout current branch
        uses: actions/checkout@v4

      - name: Build with SBT
        run: cd ./linoleum-ltlss && sbt clean compile scalafixEnable "scalafixAll --check" test run
